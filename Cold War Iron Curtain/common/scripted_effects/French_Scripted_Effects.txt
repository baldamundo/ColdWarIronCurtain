
#REDO DESC
test_to_Start = {
    set_country_flag = ALGERIA_WAR_START
    set_variable = { 513.FRA_deployed_experience = 25 }
    set_variable = { 513.ALG_deployed_experience = 25 }
    set_variable = { 1587.FRA_deployed_experience = 25 }
    set_variable = { 1587.ALG_deployed_experience = 25 }
    set_variable = { 1587.available_fra_units = 3 }
    set_variable = { 1587.available_fln_units = 3 }
    set_variable = { 1587.FRA_deployed_manpower = 15000 }
    set_variable = { 1587.ALG_deployed_manpower = 24000 }
    set_variable = { 513.FRA_deployed_manpower = 15000 }
    set_variable = { 513.ALG_deployed_manpower = 24000 }
    set_variable = { 460.FRA_deployed_manpower = 15000 }
    set_variable = { 460.ALG_deployed_manpower = 24000 }
    set_variable = { 460.FRA_deployed_experience = 25 }
    set_variable = { 460.ALG_deployed_experience = 25 }
    set_variable = { 460.available_fra_units = 3 }
    set_variable = { 460.available_fln_units = 3 }
    #white_peace = ALG
    set_global_flag = ALGERIA_WAR
    ALG = {
        set_country_flag = ALGERIA_WAR_START
        transfer_state = 1585
        transfer_state = 1152
        transfer_state = 1586
        transfer_state = 1153
        transfer_state = 1589
        add_ideas = FLN_Bonus
        set_cosmetic_tag = FLN_ALGERIA
        load_oob = ALG_1949
    }
    1585 = {
        teleport_armies = {
            limit = {
                tag = FRA
            }
            to_state = 459
        }
    }
    1152 = {
        teleport_armies = {
            limit = {
                tag = FRA
            }
            to_state = 459
        }
    }
    1586 = {
        teleport_armies = {
            limit = {
                tag = FRA
            }
            to_state = 459
        }
    }
    1153 = {
        teleport_armies = {
            limit = {
                tag = FRA
            }
            to_state = 459
        }
    }
    1589 = {
        teleport_armies = {
            limit = {
                tag = FRA
            }
            to_state = 459
        }
    }
    460 = {
        teleport_armies = {
            limit = {
                tag = FRA
            }
            to_state = 459
        }
    }
    513 = {
        teleport_armies = {
            limit = {
                tag = FRA
            }
            to_state = 459
        }
    }
    
    news_event = FLN_insurgency_options.0
   #1587 = {
   #    create_unit = {
   #        division = "name = \"Force Républicaine de Sécurité\" division_template = \"Force Républicaine de Sécurité\" start_experience_factor = 0.[EXP] start_equipment_factor = 1"
   #        owner = FRA
   #        # prioritize_location = 1058
   #    }       
   #}
   
    1587 = {
        set_demilitarized_zone = no
    }
    1588 = {
        set_demilitarized_zone = no
    }
    460 = {
        set_demilitarized_zone = no
    }
    514 = {
        set_demilitarized_zone = no
    }
    1154 = {
        set_demilitarized_zone = no
    }
    513 = {
        set_demilitarized_zone = no
    }
}
spawn_algerian_war_units_french = {
    if = {
        limit = {
            country_exists = ALE
        }
        1567 = {
            set_demilitarized_zone = yes
        }
        1588 = {
            set_demilitarized_zone = yes
        }
        514 = {
            set_demilitarized_zone = yes
        }
        1154 = {
            set_demilitarized_zone = yes
        }
        1157 = {
            set_demilitarized_zone = yes
        }
        1156 = {
            set_demilitarized_zone = yes
        }
        set_variable = {
            available_fra_units = FRA_deployed_manpower
        }
        divide_variable = {
            available_fra_units = 5000
        }
        round_variable = available_fra_units
        set_variable = {
            FRA_loop_units = available_fra_units
        }
        if = {
            limit = {
                date < 1960.1.1
            }
            while_loop_effect = {
                limit = {
                    check_variable = {
                        FRA_loop_units > 0
                    }	
                }
                subtract_from_variable = {
                    FRA_loop_units = 1
                }
                meta_effect = {
                    text = {
                        random_list = {
                            50 = {
                                create_unit = {
                                    division = "name = \"Force Républicaine de Sécurité\" division_template = \"Force Républicaine de Sécurité\" start_experience_factor = 0.[EXP] start_equipment_factor = 1"
                                    owner = FRA
                                    prioritize_location = 9976
                                }               
                            }
                            50 = {
                                create_unit = {
                                    division = "name = \"Force Républicaine de Sécurité\" division_template = \"Force Républicaine de Sécurité\" start_experience_factor = 0.[EXP] start_equipment_factor = 1"
                                    owner = FRA
                                # prioritize_location = 7065
                                }                  
                            }
                        }
                    }
                    EXP = "[?FRA_deployed_experience]"
                }
            }

        }
        else = {
            while_loop_effect = {
                limit = {
                    check_variable = {
                        FRA_loop_units > 0
                    }	
                }
                subtract_from_variable = {
                    FRA_loop_units = 1
                }
                meta_effect = {
                    text = {
                        random_list = {
                            75 = {
                                create_unit = {
                                    division = "name = \"Division d'Infanterie\" division_template = \"Division d'Infanterie\" start_experience_factor = 0.[EXP] start_equipment_factor = 1"
                                    owner = ALE
                                }               
                            }
                            25 = {
                                create_unit = {
                                    division = "name = \"Légion Étrangère Française\" division_template = \"Légion Étrangère Française\" start_experience_factor = 0.[EXP] start_equipment_factor = 1"
                                    owner = ALE
                                }                  
                            }
                        }
                    }
                    EXP = "[?FRA_deployed_experience]"
                }
            }

        }
    }
    else = {
        1567 = {
            set_demilitarized_zone = yes
        }
        1588 = {
            set_demilitarized_zone = yes
        }
        514 = {
            set_demilitarized_zone = yes
        }
        1154 = {
            set_demilitarized_zone = yes
        }
        1157 = {
            set_demilitarized_zone = yes
        }
        1156 = {
            set_demilitarized_zone = yes
        }
        set_variable = {
            available_fra_units = FRA_deployed_manpower
        }
        divide_variable = {
            available_fra_units = 5000
        }
        round_variable = available_fra_units
        set_variable = {
            FRA_loop_units = available_fra_units
        }
        if = {
            limit = {
                date < 1960.1.1
            }
            while_loop_effect = {
                limit = {
                    check_variable = {
                        FRA_loop_units > 0
                    }	
                }
                subtract_from_variable = {
                    FRA_loop_units = 1
                }
                meta_effect = {
                    text = {
                        random_list = {
                            50 = {
                                create_unit = {
                                    division = "name = \"Force Républicaine de Sécurité\" division_template = \"Force Républicaine de Sécurité\" start_experience_factor = 0.[EXP] start_equipment_factor = 1"
                                    owner = FRA
                                    prioritize_location = 9976
                                }               
                            }
                            50 = {
                                create_unit = {
                                    division = "name = \"Force Républicaine de Sécurité\" division_template = \"Force Républicaine de Sécurité\" start_experience_factor = 0.[EXP] start_equipment_factor = 1"
                                    owner = FRA
                                # prioritize_location = 7065
                                }                  
                            }
                        }
                    }
                    EXP = "[?FRA_deployed_experience]"
                }
            }

        }
        else = {
            while_loop_effect = {
                limit = {
                    check_variable = {
                        FRA_loop_units > 0
                    }	
                }
                subtract_from_variable = {
                    FRA_loop_units = 1
                }
                meta_effect = {
                    text = {
                        random_list = {
                            75 = {
                                create_unit = {
                                    division = "name = \"Division d'Infanterie\" division_template = \"Division d'Infanterie\" start_experience_factor = 0.[EXP] start_equipment_factor = 1"
                                    owner = FRA
                                }               
                            }
                            25 = {
                                create_unit = {
                                    division = "name = \"Légion Étrangère Française\" division_template = \"Légion Étrangère Française\" start_experience_factor = 0.[EXP] start_equipment_factor = 1"
                                    owner = FRA
                                }                  
                            }
                        }
                    }
                    EXP = "[?FRA_deployed_experience]"
                }
            }

        }
    }

}


spawn_algerian_war_units_fln = {
    set_variable = {
        available_fln_units = ALG_deployed_manpower
    }
    divide_variable = {
        available_fln_units = 8000
    }
    round_variable = available_fln_units
    set_variable = {
        FLN_loop_units = available_fln_units
    }
	while_loop_effect = {
		limit = {
			check_variable = {
				FLN_loop_units > 0
			}	
		}
        subtract_from_variable = {
            FLN_loop_units = 1
        }
        meta_effect = {
            text = {
                create_unit = {
                    division = "name = \"Katiba\" division_template = \"Katiba\" start_experience_factor = 0.[EXP] start_equipment_factor = 1"
                    owner = ALG
                }  
            }
            EXP = "[?ALG_deployed_experience]"
        }

    }

    

}



algerian_war_conflict_casuality_end_script = {

            ALG = {
                set_country_flag = {
                    flag = recent_conflict_algeria
                    days = 50
                    value = 1
                }
            }
            ALE = {
                set_country_flag = {
                    flag = recent_conflict_algeria
                    days = 50
                    value = 1
                }
            }
            FRA = {
                set_country_flag = {
                    flag = recent_conflict_algeria
                    days = 50
                    value = 1
                }
            }
            if = {
                limit = {
                    has_country_flag = Oran_Operation
                }
                513 = {
                    save_event_target_as = state_target_algeria
                }  
            }
            else_if = {
                limit = {
                    has_country_flag = Constatine_Operation
                }
                460 = {
                    save_event_target_as = state_target_algeria
                }  
            }
            else = {
                1587 = {
                    save_event_target_as = state_target_algeria
                }  
            }
            set_variable = {
                ALG.Algerian_Strength_Strength_Old = ALG.Algerian_Strength_Strength
            }
            set_variable = {
                FRA.Algerian_Strength_Strength_Old = FRA.Algerian_Strength_Strength
            }
			count_inflicted_casualties_on_current_enemies = yes
            ALE = {
                count_inflicted_casualties_on_current_enemies = yes
            }
			FRA = {
				count_inflicted_casualties_on_current_enemies = yes
			}
			set_variable = {
				French_Casualties_Algerian_Strength = current_inflicted_casualties_on_@FRA
			}
			set_variable = {
				Algerian_Casualties_Algerian_Strength = FRA.current_inflicted_casualties_on_@ALG
			}
            add_to_variable = {
                Algerian_Casualties_Algerian_Strength = ALE.current_inflicted_casualties_on_@ALG
            }
			set_variable = {
				Algerian_Strength_Strength_Bonus = French_Casualties_Algerian_Strength
			}
			set_variable = {
				French_Algerian_Strength_Strength_Bonus = Algerian_Casualties_Algerian_Strength
			}
			set_variable = {
				ALG.French_Casualties_Algerian_Strength_Display = FRA.current_inflicted_casualties_on_@ALG
			}
			set_variable = {
				ALG.Algerian_Casualties_Algerian_Strength_Display = ALG.current_inflicted_casualties_on_@FRA
			} 
			multiply_variable = {
				ALG.French_Casualties_Algerian_Strength_Display = 1000
			}
			multiply_variable = {
				ALG.Algerian_Casualties_Algerian_Strength_Display = 1000
			}
            if = {
                limit = {
                    country_exists = ALE
                }
                set_variable = {
                    FRA.current_inflicted_casualties_on_@ALG = ALE.current_inflicted_casualties_on_@ALG
                }
            }
			if = {
				limit = {
					check_variable = {
						FRA.current_inflicted_casualties_on_@ALG > ALG.current_inflicted_casualties_on_@FRA
					}
				}
				set_variable = {
					experience_loss = FRA.current_inflicted_casualties_on_@ALG
				}
				multiply_variable = {
					experience_loss = 0.1
				}
				subtract_from_variable = {
					event_target:state_target_algeria.ALG_deployed_experience = experience_loss
				}
				subtract_from_variable = {
					event_target:state_target_algeria.ALG_deployed_manpower = ALG.French_Casualties_Algerian_Strength_Display
				}
                if = {
                    limit = {
                        check_variable = {
                            event_target:state_target_algeria.ALG_deployed_manpower > 0
                        }
                    }
                    set_variable = {
                        event_target:state_target_algeria.ALG_deployed_manpower = 0
                    }
                }
				set_variable = {
					experience_loss = ALG.current_inflicted_casualties_on_@FRA
				}
				multiply_variable = {
					experience_loss = 0.1
				}
				subtract_from_variable = {
					event_target:state_target_algeria.FRA_deployed_experience = experience_loss
				}
				subtract_from_variable = {
					event_target:state_target_algeria.FRA_deployed_manpower = ALG.Algerian_Casualties_Algerian_Strength_Display
				}
                if = {
                    limit = {
                        check_variable = {
                            event_target:state_target_algeria.FRA_deployed_manpower > 0
                        }
                    }
                    set_variable = {
                        event_target:state_target_algeria.FRA_deployed_manpower = 0
                    }
                }
                if = {
                    limit = {
                        country_exists = ALE
                    }
                    add_war_support = 0.02
                }
                else = {
                    FRA = {
                        add_war_support = 0.02
                    }
                }

				ALG = {
					add_manpower = -1000
				}
			}
			else_if = {
				limit = {
					check_variable = {
						ALG.current_inflicted_casualties_on_@FRA > FRA.current_inflicted_casualties_on_@ALG
					}
				}
				set_variable = {
					experience_loss = FRA.current_inflicted_casualties_on_@ALG
				}
				multiply_variable = {
					experience_loss = 0.1
				}
				subtract_from_variable = {
					event_target:state_target_algeria.ALG_deployed_experience = experience_loss
				}
				subtract_from_variable = {
					event_target:state_target_algeria.ALG_deployed_manpower = ALG.French_Casualties_Algerian_Strength_Display
				}
				set_variable = {
					experience_loss = ALG.current_inflicted_casualties_on_@FRA
				}
				multiply_variable = {
					experience_loss = 0.1
				}
				subtract_from_variable = {
					event_target:state_target_algeria.FRA_deployed_experience = experience_loss
				}
				subtract_from_variable = {
					event_target:state_target_algeria.FRA_deployed_manpower = ALG.current_inflicted_casualties_on_@FRA
				}
                if = {
                    limit = {
                        country_exists = ALE
                    }
                    add_war_support = -0.02
                }
                else = {
                    FRA = {
                        add_war_support = -0.02
                    }
                }
				ALG = {
					add_manpower = 3500
				}
			}
			else = {
				set_variable = {
					experience_loss = FRA.current_inflicted_casualties_on_@ALG
				}
				subtract_from_variable = {
					event_target:state_target_algeria.ALG_deployed_experience = experience_loss
				}
				subtract_from_variable = {
					event_target:state_target_algeria.ALG_deployed_manpower = ALG.French_Casualties_Algerian_Strength_Display
				}
				set_variable = {
					experience_loss = ALG.current_inflicted_casualties_on_@FRA
				}
				subtract_from_variable = {
					event_target:state_target_algeria.FRA_deployed_experience = experience_loss
				}
				subtract_from_variable = {
					event_target:state_target_algeria.FRA_deployed_manpower = ALG.current_inflicted_casualties_on_@FRA
				}
			 }
			set_variable = {
				FRA.algeria_check = 1
			}
			set_variable = {
				ALG.algeria_check = 1
			}
			clear_current_inflicted_casualties = yes

			diplomatic_relation = { country = FRA relation = war_relation active = no }
            diplomatic_relation = { country = ALE relation = war_relation active = no }
			FRA = { diplomatic_relation = { country = ALG relation = war_relation active = no } }
            ALE = { diplomatic_relation = { country = ALG relation = war_relation active = no } }
            ALG = {
                every_enemy_country = {
                    diplomatic_relation = { country = ALG relation = war_relation active = no }
                    ALG = {
                        diplomatic_relation = { country = PREV relation = war_relation active = no }
                    }
                }
            }
            set_variable = {
                ALG.Algerian_Strength_Strength_Current = ALG.Algerian_Strength_Strength
            }
            set_variable = {
                FRA.Algerian_Strength_Strength_Current = FRA.Algerian_Strength_Strength
            }

            subtract_from_variable = {
                ALG.Algerian_Strength_Strength_Current = ALG.Algerian_Strength_Strength_Old
            }
            subtract_from_variable = {
                FRA.Algerian_Strength_Strength_Current = FRA.Algerian_Strength_Strength_Old
            }


            ALG = {
                clr_country_flag = Oran_Operation
                clr_country_flag = Constatine_Operation
                clr_country_flag = Bouira_Operation
                delete_unit = { 
                    state = 460   
                }
               delete_unit = { 
                    state = 1587
                }
               delete_unit = { 
                    state = 513   
                }
            }   
            ALE = {
                clr_country_flag = Oran_Operation
                clr_country_flag = Constatine_Operation
                clr_country_flag = Bouira_Operation
                delete_unit = { 
                    state = 460   
                }
                delete_unit = { 
                    state = 1587
                }
                delete_unit = { 
                    state = 513   
                }
                delete_unit = { 
                    state = 460   
                }
                delete_unit = { 
                    state = 1587
                }
                delete_unit = { 
                    state = 513   
                }              
                delete_unit = { 
                    state = 460   
                }
               delete_unit = { 
                    state = 1587
                }
               delete_unit = { 
                    state = 513   
                }
            }       
	FRA = {
		clr_country_flag = Oran_Operation
		clr_country_flag = Constatine_Operation
		clr_country_flag = Bouira_Operation
		delete_unit_template_and_units = {
			division_template = "Force Républicaine de Sécurité"
			disband = no #will refund equipment and manpower
		}
		division_template = {
			name = "Force Républicaine de Sécurité"			#Basic
			division_names_group = FRA_COL_01
			regiments = {
				militia = { x = 0 y = 0 }				#1000
				militia = { x = 0 y = 1 }				#1000
				militia = { x = 0 y = 2 }				#1000
				militia = { x = 0 y = 3 }				#1000
			}
			support = {
				cavalry_special_force = { x = 0 y = 0 }	#500
			}
			priority = 0
		}
	}
}

eu_gdp_goal_calc = {
	set_variable = {
		eu_gdp = FRA.grossdomesticproduct
	}
	add_to_variable = {
		eu_gdp = BEL.grossdomesticproduct
	}
	add_to_variable = {
		eu_gdp = HOL.grossdomesticproduct
	}
	add_to_variable = {
		eu_gdp = LUX.grossdomesticproduct
	}
	add_to_variable = {
		eu_gdp = ITA.grossdomesticproduct
	}
	add_to_variable = {
		eu_gdp = WGR.grossdomesticproduct
	}
	set_variable = {
		eu_gdp_goal = eu_gdp_goal 
	}
	multiply_variable = {
		eu_gdp_goal = 1.1
	}
}

portrait_test = {
    set_country_leader_portrait = {
        ideology = maoism
        portrait = GFX_Mao_1960
    }
}